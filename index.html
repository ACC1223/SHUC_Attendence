<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>合唱团管理系统</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="app">
        <div class="container">
            <div class="header">
                <h1>合唱团管理系统</h1>
            </div>

            <!-- 主导航 -->
            <div class="nav-tabs">
                <div class="nav-tab" :class="{ active: currentPage === 'attendance' }" @click="switchPage('attendance')">
                    点名系统
                </div>
                <div class="nav-tab" :class="{ active: currentPage === 'members' }" @click="switchPage('members')">
                    成员管理
                </div>
                <div class="nav-tab" :class="{ active: currentPage === 'clothing' }" @click="switchPage('clothing')">
                    服装管理
                </div>
            </div>

            <!-- 点名系统页面 -->
            <div v-if="currentPage === 'attendance'">
                <attendance-system :persons="persons"
                                   :recent-activities="recentActivities"
                                   :roll-call-records="rollCallRecords"
                                   @activity-created="loadRecentActivities"
                                   @activity-selected="selectActivity"
                                   @activity-deleted="loadRecentActivities"
                                   @record-updated="loadRollcallRecords"></attendance-system>
            </div>

            <!-- 成员管理页面 -->
            <div v-if="currentPage === 'members'">
                <members-management :persons="persons"
                                    :roll-call-records="rollCallRecords"
                                    :recent-activities="recentActivities"

                                    @member-added="loadMembers"
                                    @member-updated="loadMembers"
                                    @member-deleted="loadMembers"></members-management>
            </div>

            <!-- 服装管理页面 -->
            <div v-if="currentPage === 'clothing'">
                <clothing-management :persons="persons"
                                     :clothing-records="clothingRecords"
                                     @clothing-record-added="loadClothingRecords"
                                     @clothing-record-updated="loadClothingRecords"
                                     @clothing-record-deleted="loadClothingRecords"></clothing-management>
            </div>

            <div v-if="loading" class="loading">加载中...</div>
            <div v-if="error" class="error">{{ error }}</div>
        </div>
    </div>

    <!-- 引入组件 -->
    <script src="utils/supabase.js"></script>
    <script src="js/attendance.js"></script>
    <script src="js/members.js"></script>
    <script src="js/clothing.js"></script>
    <script src="js/app.js"></script>
    <script src="js/xiangxi.js"></script>
</body>
</html>